<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>如何加速访问Github</title>
      <link href="/2022/09/24/github/%E5%A6%82%E4%BD%95%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AEgithub/"/>
      <url>/2022/09/24/github/%E5%A6%82%E4%BD%95%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AEgithub/</url>
      
        <content type="html"><![CDATA[<p>本篇文章主要介绍加速访问github的方法（不是科学上网），能够科学上网的同志可以自行跳过本文。<br>以下是加速访问Github的几种方法：</p><h1 id="Watt-Toolkit（原名：Steam-）"><a href="#Watt-Toolkit（原名：Steam-）" class="headerlink" title="Watt Toolkit（原名：Steam++）"></a>Watt Toolkit（原名：Steam++）</h1><p>Steam++官网下载：<a href="https://steampp.net/">https://steampp.net</a><br>或者也可在博主的蓝奏云上下载：<a href="https://wwp.lanzouv.com/izkBk0c9lu4h">https://wwp.lanzouv.com/izkBk0c9lu4h</a> 密码:c274<br>下载安装后启动，勾选Github，点击一键加速 即可加速访问Github</p><p><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/github_tool1.jpg"></p><h1 id="dev-sidecar（推荐使用）"><a href="#dev-sidecar（推荐使用）" class="headerlink" title="dev-sidecar（推荐使用）"></a>dev-sidecar（推荐使用）</h1><p>下载：<a href="https://wwp.lanzouv.com/iHFSh0c9lhid">https://wwp.lanzouv.com/iHFSh0c9lhid</a><br>使用方法：安装后启动，选择模式，然后把代理服务和系统代理启动即可<br>注意：第一次打开会提示安装证书，根据提示操作即可</p><p><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/github_tool2.jpg"></p><p>Gitee：<a href="https://gitee.com/interesting-goods/dev-sidecar">https://gitee.com/interesting-goods/dev-sidecar</a><br>github：<a href="https://github.com/docmirror/dev-sidecar">https://github.com/docmirror/dev-sidecar</a></p><h1 id="FastGithub（推荐使用）"><a href="#FastGithub（推荐使用）" class="headerlink" title="FastGithub（推荐使用）"></a>FastGithub（推荐使用）</h1><p>下载：<a href="https://wwp.lanzouv.com/iMRCG0c9klib">https://wwp.lanzouv.com/iMRCG0c9klib</a><br>使用方法：下载后解压，找到文件夹中的FastGithub.UI.exe，双击运行FastGithub.UI.exe<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/github_tool3.jpg"></p><p>github：<a href="https://github.com/dotnetcore/FastGithub">https://github.com/dotnetcore/FastGithub</a></p><h1 id="修改hosts"><a href="#修改hosts" class="headerlink" title="修改hosts"></a>修改hosts</h1><p>修改hosts这种方式访问GitHub是比较麻烦的，这里直接使用网络上某位大佬写好的exe文件，以管理员身份运行即可加速访问Github。<br>一定要以管理员身份运行，否则可能不成功！<br>下载链接：<a href="https://wwp.lanzouv.com/ioPAg0c9lztc">https://wwp.lanzouv.com/ioPAg0c9lztc</a> 密码:9cxe</p><p>通过以上几种方法，我们基本上可以稳定访问GitHub了！当然，你能科学上网，当我没说。<br>如果本文对你有帮助的话，能不能打赏文章，支持一下作者。（开玩笑的）</p>]]></content>
      
      
      <categories>
          
          <category> github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python爬虫实战之xpath解析</title>
      <link href="/2022/08/01/Python/%E7%88%AC%E8%99%AB%E4%B9%8Bxpath%E8%A7%A3%E6%9E%90/"/>
      <url>/2022/08/01/Python/%E7%88%AC%E8%99%AB%E4%B9%8Bxpath%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>XPath 是一门在 XML 文档中查找信息的语言，最初是用来搜寻 XML 文档的，但是它同样适用于 HTML 文档的搜索。<br>所以在Python爬虫中，我们经常使用xpath解析这种高效便捷的方式来提取信息。</p><h1 id="环境的安装"><a href="#环境的安装" class="headerlink" title="环境的安装"></a>环境的安装</h1><p>使用 xpath 需要安装 lxml 库</p><blockquote><p>pip install lxml -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p></blockquote><h1 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h1><p>实例化一个etree的对象，且需要将被解析的页面源码数据加载到该对象中。有两种方式：<br>1、将本地的html文档中的源码数据加载到etree对象中<br><code> etree.parse(&#39;filePath&#39;, etree.HTMLParser())  # filePath为文件的路径</code><br>示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree <span class="comment"># 导包</span></span><br><span class="line">html = etree.parse(<span class="string">&#x27;./test.html&#x27;</span>, etree.HTMLParser()) <span class="comment"># ./test.html为本地的html文件的路径</span></span><br><span class="line">html.xpath(<span class="string">&#x27;xpath表达式&#x27;</span>)</span><br></pre></td></tr></table></figure><p>2、将从互联网上获取的源码数据加载到etree对象中<br><code>etree.HtML(&#39;page_data&#39;) # page_data为从页面获取的源码数据</code><br>示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree <span class="comment"># 导包</span></span><br><span class="line">html = etree.HtML(<span class="string">&#x27;page_data&#x27;</span>) <span class="comment"># page_data为从页面获取的源码数据</span></span><br><span class="line">html.xpath(<span class="string">&#x27;xpath表达式&#x27;</span>)</span><br></pre></td></tr></table></figure><p>使用xpath解析数据，最重要的步骤就是xpath表达式的书写。下面介绍xpath的常用表达式。</p><h1 id="xpath常用表达式"><a href="#xpath常用表达式" class="headerlink" title="xpath常用表达式"></a>xpath常用表达式</h1><table><thead><tr><th>表达式</th><th>含义</th></tr></thead><tbody><tr><td>nodename</td><td>选取此节点的所有子节点</td></tr><tr><td>&#x2F;</td><td>表示的是从根节点开始定位。表示的是一个层级</td></tr><tr><td>&#x2F;&#x2F;</td><td>从当前节点选取子孙节点（后代）</td></tr><tr><td>.</td><td>选取当前节点</td></tr><tr><td>..</td><td>选取当前节点的父节点</td></tr><tr><td>@</td><td>选取属性</td></tr><tr><td>text()</td><td>获取文本</td></tr><tr><td>*</td><td>通配符，任何元素节点</td></tr><tr><td>nodename[@attrib&#x3D;’value’]</td><td>选取给定属性具有给定值的指定元素。如 div[@class&#x3D;’cell’] 表示 class 属性的值为 cell 的所有 div 元素</td></tr></tbody></table><p><strong>对以上的表达式的实例详解</strong><br>先引入一段将要测试的 HTML 代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com/&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://weibo.com/&quot;</span>&gt;</span>微博<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.tmall.com/&quot;</span>&gt;</span>天猫<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>test1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;aa&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.iqiyi.com/&quot;</span>&gt;</span>爱奇艺<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;bb&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://v.qq.com/&quot;</span>&gt;</span>腾讯视频<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>test2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>为了方便直观，我们对 HTML 文件进行本地读取测试</p><h2 id="取节点"><a href="#取节点" class="headerlink" title="取节点"></a>取节点</h2><p><strong>&#x2F; 和 &#x2F;&#x2F; 的用法</strong><br>我们先感受一下使用 xpath 来对网页进行解析的过程<br>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">html = etree.parse(<span class="string">&#x27;./test.html&#x27;</span>, etree.HTMLParser())</span><br><span class="line">result1 = html.xpath(<span class="string">&#x27;/html/body/div/ul/li/a&#x27;</span>) <span class="comment"># /表示层级关系，第一个/是根节点</span></span><br><span class="line"><span class="built_in">print</span>(result1)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;Element a at 0x28696f20ac0&gt;, &lt;Element a at 0x28696f20b00&gt;, &lt;Element a at 0x28696f20b40&gt;]</span><br></pre></td></tr></table></figure><p>可以看出运行结果中有3个节点，正好是从上往下数前面3个<strong>a节点</strong>。我们也可以看出上面使用了 <code>/</code> 来表示层级关系，所谓层级关系，其实就是一层包着一层，比如测试HTML代码中的 HTML 节点包着 body 节点，我们要取到 body 节点，就可以用 <code>/html/body</code> 来表示。以此类推，就可以取到我们想要的节点了。</p><p>我们既然能取出前3个<strong>a节点</strong>,那该如何取出所有的<strong>a节点</strong>呢？<br>这时我们就要用到 <code>//</code> 了<br>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result2 = html.xpath(<span class="string">&#x27;/html/body/div//a&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result2)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;Element a at 0x222bf9afc80&gt;, &lt;Element a at 0x222bf9afcc0&gt;, &lt;Element a at 0x222bf9afd00&gt;, &lt;Element a at 0x222bf9afd40&gt;, &lt;Element a at 0x222bf9afd80&gt;]</span><br></pre></td></tr></table></figure><p>不难看出 class&#x3D;”big” 的div节点包着所有的 a节点，即所有的 a节点都是 class&#x3D;”big” 的div节点的子孙节点(或简单理解为后代),我们用 <code>/html/body/div//a</code> 即可取出所有的 a节点<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test1.jpg"><br><strong>通配符 * 的用法</strong><br>比如我们想取到下图的两个<strong>p节点</strong>,就可以用通配符 <code>*</code> 来提取<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test4.jpg"><br>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">第一个p节点的表达式为： &#x27;/html/body/div/ul/p&#x27;</span></span><br><span class="line"><span class="string">第二个p节点的表达式为： &#x27;/html/body/div/div/p&#x27;</span></span><br><span class="line"><span class="string">可以看到这两个表达式唯一不同的地方的是 p节点前面的节点（父节点）一个是ul，一个是div</span></span><br><span class="line"><span class="string">这时我们只需用通配符 * 来代替p节点前面的父节点，因为通配符 * 可以表示任意节点</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># html.xpath(&#x27;/html/body/div/ul/p&#x27;)</span></span><br><span class="line"><span class="comment"># html.xpath(&#x27;/html/body/div/div/p&#x27;)</span></span><br><span class="line">result = html.xpath(<span class="string">&#x27;/html/body/div/*/p&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;Element p at <span class="number">0x1e2c335f880</span>&gt;, &lt;Element p at <span class="number">0x1e2c335f8c0</span>&gt;]</span><br></pre></td></tr></table></figure><p>当然如果要取这两个p节点也可以用 &#x2F;&#x2F; 来取，这里只是演示通配符 <code>*</code> 的用法</p><p><strong>索引定位</strong><br>比如我们想取到第一个a节点，就可以使用索引定位了<br>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result3 = html.xpath(<span class="string">&#x27;/html/body/div/ul/li[1]/a&#x27;</span>) <span class="comment">#li[1]表示第一个li节点，注意索引是从[1]开始</span></span><br><span class="line"><span class="built_in">print</span>(result3)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;Element a at <span class="number">0x28705120ac0</span>&gt;]</span><br></pre></td></tr></table></figure><p>这里一定要注意索引是从 <code>[1]</code> 开始！！！</p><p><strong>属性定位</strong><br>比如我想取 id&#x3D;”aa” 的<strong>a节点</strong>，就可以使用属性定位 <code>nodename[@attrib=&#39;value&#39;]</code><br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test2.jpg"><br>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result4 = html.xpath(<span class="string">&#x27;//a[@id=&quot;aa&quot;]&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result4)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;Element a at <span class="number">0x2718236fc00</span>&gt;]</span><br></pre></td></tr></table></figure><h2 id="取文本"><a href="#取文本" class="headerlink" title="取文本"></a>取文本</h2><p>在xpath中，使用 <code>text()</code> 即可取出网页中的文本信息<br>代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result5 = html.xpath(<span class="string">&#x27;/html/body/div/ul/li[1]/a/text()&#x27;</span>) <span class="comment"># text()获取文本</span></span><br><span class="line"><span class="built_in">print</span>(result5)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;百度&#x27;</span>]</span><br></pre></td></tr></table></figure><p>可以看到这个结果是一个列表，如果我们想取到里面的字符串，可以这样</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result6 = html.xpath(<span class="string">&#x27;/html/body/div/ul/li[1]/a/text()&#x27;</span>)[<span class="number">0</span>] <span class="comment"># 从列表中取第一个元素</span></span><br><span class="line"><span class="built_in">print</span>(result6)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">百度</span><br></pre></td></tr></table></figure><h2 id="取属性"><a href="#取属性" class="headerlink" title="取属性"></a>取属性</h2><p>如果我们想取到下图这个属性，我可以使用 <code>@属性</code> 这个表达式<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test3.jpg"><br>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result7 = html.xpath(<span class="string">&#x27;//a[@id=&quot;bb&quot;]/@href&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result7)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;https://v.qq.com/&#x27;</span>]</span><br></pre></td></tr></table></figure><h1 id="写xpath表达式的小技巧"><a href="#写xpath表达式的小技巧" class="headerlink" title="写xpath表达式的小技巧"></a>写xpath表达式的小技巧</h1><p>我们在写爬虫时，往往会遇到比较复杂的页面代码，我们写xpath表达式也比较费劲。这里告诉大家一个偷懒的方法，直接借助浏览器copy</p><h2 id="学会偷懒"><a href="#学会偷懒" class="headerlink" title="学会偷懒"></a>学会偷懒</h2><p>具体操作：在浏览器中 F12 打开开发者工具 ——&gt; 用左上角的箭头选取需要的内容 ——&gt; 在对应的代码上鼠标右击 ——&gt; Copy ——&gt; Copy XPath<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test5.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Copy的结果：</span><br><span class="line">//*[@id=&quot;js_top_news&quot;]/div[2]/h2/a</span><br></pre></td></tr></table></figure><p>这样的话，我们就轻松拿到了需要的xpath表达式。<br>当然我们不能只会使用这种copy的方法，还要真正理解xpath表达式的语法规则。因为在Python爬虫中xpath解析是有局限的，有些情况我们不能使用xpath表达式。</p><h2 id="xpath解析的局限性"><a href="#xpath解析的局限性" class="headerlink" title="xpath解析的局限性"></a>xpath解析的局限性</h2><p>如果网页的数据是通过Ajax动态加载的，我们就不能使用xpath表达式来提取信息<br>一个简单的判断方法：在网页中鼠标右击 ——&gt; 查看网页源代码 ——&gt; ctrl+F 搜索想要的信息 ——&gt; 搜索无结果 ——&gt; 不能使用xpath解析<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test6.jpg"></p><h2 id="写xpath表达式的避坑指南"><a href="#写xpath表达式的避坑指南" class="headerlink" title="写xpath表达式的避坑指南"></a>写xpath表达式的避坑指南</h2><p>有时，我们直接复制 xpath表达式或者自己写xpath表达式会遇到提取信息后返回一个 空列表 这种情况，反复对照代码发现自己好像又没写错，这是怎么回事呢？<br>其实，很大可能是你没有以 <code>网页源代码</code> 为准来写xpath表达式，而是根据开发者工具展示的代码来写xpath表达式。原因就是开发者工具是实时的网页代码（比如通过js加载一些数据后的)，而我们提取到的页面源码数据不一定是实时的网页代码。<br>比如：<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test7.jpg"><br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test8.jpg"><br>一般情况下，我们可以直接根据开发者工具展示的代码来写xpath表达式，但是一定要结合网页源代码，以网页源代码为准！<br>重要的事情说三遍！以网页源代码为准！以网页源代码为准！以网页源代码为准！</p><h1 id="爬虫实战"><a href="#爬虫实战" class="headerlink" title="爬虫实战"></a>爬虫实战</h1><p>下面进入爬虫实战。我们的目标是爬取某斗图网的表情包图片和描述文字，并把描述文字作为表情包图片的文件名</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入必要的库</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Referer&quot;</span>: <span class="string">&quot;https://www.doutub.com/&quot;</span>  <span class="comment"># 防盗链：溯源，当前本次请求的上一级是谁。请看下面图一、图二</span></span><br><span class="line">&#125;</span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;你想爬取前几页：&quot;</span>))</span><br><span class="line"><span class="keyword">if</span> os.path.exists(<span class="string">&quot;images&quot;</span>) == <span class="literal">False</span>:</span><br><span class="line">    os.mkdir(<span class="string">&quot;images&quot;</span>) <span class="comment">#如果不存在images文件夹，则创建images文件夹</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(num): <span class="comment"># for循环提取多页内容</span></span><br><span class="line">    url = <span class="string">f&#x27;https://www.doutub.com/img_lists/new/<span class="subst">&#123;n+<span class="number">1</span>&#125;</span>&#x27;</span></span><br><span class="line">    <span class="comment"># url 是网址，这里使用字符串拼接网址</span></span><br><span class="line">    <span class="comment"># 如 https://www.doutub.com/img_lists/new/1（第一页网址）  https://www.doutub.com/img_lists/new/2（第二页网址）等等</span></span><br><span class="line">    resp = requests.get(url, headers=headers)</span><br><span class="line">    html = etree.HTML(resp.text)</span><br><span class="line">    divs = html.xpath(<span class="string">&quot;//div[@class=&#x27;cell&#x27;]&quot;</span>)[<span class="number">0</span>:<span class="number">50</span>]</span><br><span class="line">    <span class="comment"># 返回的 divs 是一个列表，切片去除无用信息，第51个div我们不需要,详细看图三</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> div <span class="keyword">in</span> divs:</span><br><span class="line">        imgSrc = div.xpath(<span class="string">&quot;./a/img/@data-src&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">        word = div.xpath(<span class="string">&quot;./a/span/text()&quot;</span>)[<span class="number">0</span>].strip()</span><br><span class="line">        name = re.sub(<span class="string">r&#x27;[\:*?&quot;&lt;&gt;/|]&#x27;</span>, <span class="string">&#x27;&#x27;</span>, word) <span class="comment">#使用正则表达式sub函数去除 \:*?&quot;&lt;&gt;/|这些字符。原因看图四</span></span><br><span class="line">        img_type = imgSrc.split(<span class="string">&quot;.&quot;</span>)[-<span class="number">1</span>] <span class="comment">#因为图片文件的格式有些是jpg，有些是gif，这里取出图片格式</span></span><br><span class="line">        <span class="comment"># 下载图片</span></span><br><span class="line">        img_resp = requests.get(imgSrc, headers=headers)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;images/&quot;</span> + name + <span class="string">&quot;.&quot;</span> + img_type, mode=<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(img_resp.content)</span><br><span class="line">        <span class="built_in">print</span>(name + <span class="string">&quot;.&quot;</span> + img_type, <span class="string">&quot;下载完成&quot;</span>)</span><br><span class="line">        time.sleep(<span class="number">0.3</span>)  <span class="comment"># 防止频繁访问被封ip，这里休息0.3秒</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\n第<span class="subst">&#123;n+<span class="number">1</span>&#125;</span>页下载完成！\n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;全部下载完成！！！&quot;</span>)</span><br></pre></td></tr></table></figure><p>图一：<br>防盗链问题<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test10.jpg"><br>图二：<br>解决防盗链<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test11.jpg"></p><p>图三：<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test9.jpg"></p><p>图四：<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test12.jpg"></p><p>最终效果：<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/xpath_test13.jpg"></p><p><strong>大功告成！</strong></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 爬虫 </tag>
            
            <tag> xpath </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用Python轻松实现视频转gif动图</title>
      <link href="/2022/07/30/Python/%E8%A7%86%E9%A2%91%E8%BD%ACgif%E5%8A%A8%E5%9B%BE/"/>
      <url>/2022/07/30/Python/%E8%A7%86%E9%A2%91%E8%BD%ACgif%E5%8A%A8%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>不知道大家是不是有过类似的经历，想把视频转换为gif动态图片，却无从下手。网上搜的网站和软件很多是需要付费的，或者转出来的gif动图是有水印的，就很无语！其实，通过Python几行代码就可以搞定视频转gif</p><h1 id="安装moviepy库"><a href="#安装moviepy库" class="headerlink" title="安装moviepy库"></a>安装moviepy库</h1><p>命令行输入（注：pip 已内置于 Python 3.4 和 2.7 及以上版本，其他版本需另行安装）</p><blockquote><p>pip install moviepy</p></blockquote><p>这里提一句，请先联网再安装moviepy库!</p><p>使用镜像可以让你安装的更快！</p><blockquote><p>pip install moviepy -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p></blockquote><p>常用的Python镜像有</p><blockquote><p>百度镜像：<a href="https://mirror.baidu.com/pypi/simple">https://mirror.baidu.com/pypi/simple</a><br>清华镜像：<a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p></blockquote><h1 id="写入代码"><a href="#写入代码" class="headerlink" title="写入代码"></a>写入代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> moviepy.editor <span class="keyword">import</span> *</span><br><span class="line">video_path = <span class="built_in">input</span>(<span class="string">&#x27;请输入视频路径：&#x27;</span>)</span><br><span class="line">video = VideoFileClip(video_path)</span><br><span class="line">video.write_gif(<span class="string">&quot;gif_file.gif&quot;</span>, fps=<span class="number">20</span>)</span><br><span class="line"><span class="comment"># 设置转换后的gif的帧率为20</span></span><br></pre></td></tr></table></figure><h1 id="转换效果"><a href="#转换效果" class="headerlink" title="转换效果"></a>转换效果</h1><p><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/gif_file.gif"></p><h1 id="gif文件大的解决方案"><a href="#gif文件大的解决方案" class="headerlink" title="gif文件大的解决方案"></a>gif文件大的解决方案</h1><p>gif文件一般都很大。22秒的gif动图，就足足有49M的大小！如果需要转换的视频有一分钟，那么gif文件就有100M之多甚至更多！<br><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/gifbig.png"></p><p>那我们该如何解决呢?</p><p><code>设置帧率、截取视频长度再转换</code>这两种方式可以减少gif的大小</p><h2 id="设置帧率"><a href="#设置帧率" class="headerlink" title="设置帧率"></a>设置帧率</h2><p>设置 fps 的值，来压缩 gif 的大小</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clip.write_gif(<span class="string">&quot;gif_file.gif&quot;</span>, fps=<span class="number">15</span>)</span><br><span class="line"><span class="comment"># 设置转换后的gif的帧率为15</span></span><br></pre></td></tr></table></figure><h2 id="截取视频长度再转换"><a href="#截取视频长度再转换" class="headerlink" title="截取视频长度再转换"></a>截取视频长度再转换</h2><p>我们还可以通过设置 subclip 参数来指定转换的视频范围。 subclip：截取原视频中的自 t_start 至 t_end 间的视频片段</p><table><thead><tr><th align="center">时间格式</th><th align="center">表示方式</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center">秒</td><td align="center">xx.xx的形式</td><td align="center">11.02 代表11.02秒</td></tr><tr><td align="center">分,秒</td><td align="center">xx,xx的形式</td><td align="center">10,35 代表10分35秒</td></tr><tr><td align="center">时,分,秒</td><td align="center">xx,xx,xx的形式</td><td align="center">10,35,30 代表10小时35分30秒</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">subclip(<span class="number">2</span>,<span class="number">3</span>) <span class="comment"># 选取的是原视频从 2秒 到 3秒</span></span><br><span class="line">subclip((<span class="number">1.05</span>),(<span class="number">1.08</span>)) <span class="comment">#选取的时原视频从 1.05秒 到 1.08秒</span></span><br><span class="line">subclip((<span class="number">1</span>,<span class="number">5</span>),(<span class="number">1</span>,<span class="number">8</span>)) <span class="comment">#选取的是原视频从 1分5秒 到 1分8秒</span></span><br><span class="line">subclip((<span class="number">1</span>,<span class="number">5</span>,<span class="number">30</span>),(<span class="number">1</span>,<span class="number">5</span>,<span class="number">35</span>)) <span class="comment">#选取的是原视频从 1小时5分30秒 到 1小时5分35秒</span></span><br></pre></td></tr></table></figure><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>截取原视频的5.01秒到6.36秒，并把转换后的 gif 的帧率设为18</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> moviepy.editor <span class="keyword">import</span> *</span><br><span class="line">video_path = <span class="built_in">input</span>(<span class="string">&#x27;请输入视频路径：&#x27;</span>)</span><br><span class="line">video = VideoFileClip(video_path).subclip(<span class="number">5.01</span>,<span class="number">6.36</span>) <span class="comment">#选取原视频5.01秒到6.36秒</span></span><br><span class="line">video.write_gif(<span class="string">&quot;gif_file.gif&quot;</span>, fps=<span class="number">18</span>) <span class="comment">#设置转换后的gif的帧率为18</span></span><br></pre></td></tr></table></figure><h1 id="其他说明"><a href="#其他说明" class="headerlink" title="其他说明"></a>其他说明</h1><p>该程序已经打包为 exe 文件了<br>有需要的的朋友，也可以通过以下的链接获取 <em><strong>视频转 gif 的软件</strong></em> 哟！<br><a href="https://wwp.lanzouq.com/iPMZN08j7wtg">点我下载软件</a></p><p>在用pyinstaller打包成exe文件时，会有一个小坑 moviepy 打包报错，我也是参考了大佬的文章才顺利解决问题 <a href="https://blog.csdn.net/J_____Q/article/details/120123232">参考文章跳转</a></p><p>最后，若有不足或者不当之处，欢迎指正批评！<br>相关参考文章：<a href="https://blog.csdn.net/m0_59163425/article/details/125154457">https://blog.csdn.net/m0_59163425/article/details/125154457</a><br><a href="https://www.bilibili.com/video/BV1oX4y137vh?p=7&amp;share_source=copy_web&amp;vd_source=41db5528fa268b4e34f279c406002a4c">https://www.bilibili.com/video/BV1oX4y137vh?p=7&amp;share_source=copy_web&amp;vd_source=41db5528fa268b4e34f279c406002a4c</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> moviepy </tag>
            
            <tag> gif </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原生css+js实现轮播图</title>
      <link href="/2022/07/27/%E5%89%8D%E7%AB%AF/%E5%8E%9F%E7%94%9Fcss+js%E5%AE%9E%E7%8E%B0%E8%BD%AE%E6%92%AD%E5%9B%BE/"/>
      <url>/2022/07/27/%E5%89%8D%E7%AB%AF/%E5%8E%9F%E7%94%9Fcss+js%E5%AE%9E%E7%8E%B0%E8%BD%AE%E6%92%AD%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p>本篇文章给大家介绍一下使用原生CSS、JavaScript实现轮播图的方法。我总结了一下，把轮播图的实现分为两种方法：1、用图片移动实现轮播图；2、用opacity实现轮播图 （当然原生代码实现轮播图的方法有很多种，这里呢给大家分享一下我认为比较实用的方法）</p><h1 id="用图片移动实现轮播图"><a href="#用图片移动实现轮播图" class="headerlink" title="用图片移动实现轮播图"></a>用图片移动实现轮播图</h1><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>先生成一个div盒子作为展示区，展示区的宽度为1张图片的宽度，然后把所有的图片水平平铺，接着让超出展示区的图片隐藏。最后通过设置定时器，改变 left 来拉动图片使展示区显示不同的图片</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="HTML部分"><a href="#HTML部分" class="headerlink" title="HTML部分"></a>HTML部分</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lunbo&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 轮播图图片 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;lunbo_list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/bg1.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/bg2.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/bg3.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 轮播图下方的小圆点 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;min-point&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;min active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;min&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;min&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 左箭头图片 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/banner-left.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gopre&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 右箭头图片 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/banner-right.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gonext&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"> &#125; <span class="comment">/*清除默认margin padding样式的影响 */</span></span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">460px</span>; </span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">55px</span> auto;</span><br><span class="line">&#125; <span class="comment">/* 给盒子设置宽高并水平居中 */</span></span><br><span class="line"><span class="selector-id">#lunbo</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">&#125;<span class="comment">/* 设置盒子为相对定位,让盒子宽度超出的部分隐藏 */</span></span><br><span class="line"><span class="comment">/* 以下使图片在水平方向平铺 */</span></span><br><span class="line"><span class="selector-class">.lunbo_list</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">300%</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">transition</span>: .<span class="number">2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">450px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使小圆点定位到轮播图下方 */</span></span><br><span class="line"><span class="selector-class">.min-point</span>&#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">35px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.min</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#8B888B</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">14px</span>;</span><br><span class="line"><span class="attribute">cursor</span>: pointer; <span class="comment">/* 鼠标经过或点击时 鼠标光标变为小手 */</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.min</span><span class="selector-class">.active</span>&#123;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125; <span class="comment">/* 设置小圆点点击后的样式，这里点击后背景颜色变为白色 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125; <span class="comment">/* 设置左右箭头的样式，并隐藏 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#gopre</span>&#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#gonext</span>&#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JS部分"><a href="#JS部分" class="headerlink" title="JS部分"></a>JS部分</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> min=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.min&#x27;</span>);  <span class="comment">//获取 所有class为min的元素</span></span><br><span class="line"><span class="keyword">let</span> images=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.lunbo_list&#x27;</span>); <span class="comment">//获取class为lunbo_list的元素（第一个元素）</span></span><br><span class="line"><span class="keyword">let</span> index=<span class="number">0</span>; <span class="comment">// 定时器时间</span></span><br><span class="line"><span class="keyword">let</span> time; <span class="comment">// 轮播图图片和小圆点的下标</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lunbo_div=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;lunbo&#x27;</span>); <span class="comment">// 获取id为 lunbo 的元素</span></span><br><span class="line"><span class="keyword">let</span> btns=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.btn&#x27;</span>); <span class="comment">// 获取 所有class为btn的元素</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">position</span>(<span class="params"></span>)&#123; <span class="comment">//实现轮播的关键函数</span></span><br><span class="line">images.<span class="property">style</span>.<span class="property">left</span> = (index * -<span class="number">100</span>) + <span class="string">&quot;%&quot;</span> <span class="comment">//使每张图片向左移动100%，即一张图片的距离</span></span><br><span class="line"><span class="title function_">minActive</span>() <span class="comment">//调用小圆点改变的函数,因为图片和小圆点要同时移动</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123; <span class="comment">//向右移动一张图片</span></span><br><span class="line"><span class="keyword">if</span>(index&gt;=min.<span class="property">length</span>-<span class="number">1</span>)&#123;</span><br><span class="line">index=<span class="number">0</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">index++</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 假如一共是3张图片，移动到第3张时再向右移动，这时就要移动第1张，所以需要做判断当前是第几张图片</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">desc</span>(<span class="params"></span>)&#123; <span class="comment">//向左移动一张图片</span></span><br><span class="line"><span class="keyword">if</span>(index&lt;<span class="number">1</span>)&#123;</span><br><span class="line">index=min.<span class="property">length</span>-<span class="number">1</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">index--</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">minActive</span>(<span class="params"></span>) &#123; <span class="comment">//小圆点改变的函数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; min.<span class="property">length</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(j==index)&#123;</span><br><span class="line">min[j].<span class="property">className</span> = <span class="string">&#x27;min active&#x27;</span> <span class="comment">//通过为元素添加新的类名active，使小圆点改变样式（active已在css中设置过）</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">min[j].<span class="property">className</span> = <span class="string">&#x27;min&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>)&#123;</span><br><span class="line">time=<span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">index++</span><br><span class="line"><span class="title function_">desc</span>()</span><br><span class="line"><span class="title function_">add</span>()</span><br><span class="line"><span class="title function_">position</span>()</span><br><span class="line">&#125;,<span class="number">2000</span>) <span class="comment">//设置定时器 2000为2000毫秒，即2秒后自动轮播</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;min.<span class="property">length</span>;i++)&#123;</span><br><span class="line">min[i].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123; <span class="comment">//为小圆点设置点击事件</span></span><br><span class="line">index=i</span><br><span class="line"><span class="title function_">position</span>()</span><br><span class="line"><span class="built_in">clearInterval</span>(time) <span class="comment">// 清除定时器</span></span><br><span class="line"><span class="title function_">timer</span>()</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">timer</span>() <span class="comment">//开启定时器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 轮播左右箭头根据鼠标的移入、移出 来显示、隐藏图标</span></span><br><span class="line">lunbo_div.<span class="title function_">addEventListener</span>(<span class="string">&quot;mouseover&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">btns[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span></span><br><span class="line">btns[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">lunbo_div.<span class="title function_">addEventListener</span>(<span class="string">&quot;mouseout&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">btns[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span></span><br><span class="line">btns[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下是点击是切换上一张 和 切换下一张 此处要考虑定时器的影响</span></span><br><span class="line">btns[<span class="number">0</span>].<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">clearInterval</span>(time)</span><br><span class="line"><span class="title function_">desc</span>()</span><br><span class="line"><span class="title function_">position</span>()</span><br><span class="line"><span class="title function_">timer</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">btns[<span class="number">1</span>].<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">clearInterval</span>(time)</span><br><span class="line"><span class="title function_">add</span>()</span><br><span class="line"><span class="title function_">position</span>()</span><br><span class="line"><span class="title function_">timer</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/lunbo1.jpg"><br><a href="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/lunbo1.mp4">点我查看完整效果</a></p><h1 id="用opacity实现轮播图"><a href="#用opacity实现轮播图" class="headerlink" title="用opacity实现轮播图"></a>用opacity实现轮播图</h1><h2 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h2><p>先生成一个div盒子作为展示区，展示区的宽度为1张图片的宽度，然后设置所有图片的position为absolute，把所有图片定位到展示区堆叠起来，最后通过opacity将图片设为透明，把要展示的图片的设置为不透明，再配合定时器，从而使展示区显示不同的图片</p><h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><h3 id="HTML部分-1"><a href="#HTML部分-1" class="headerlink" title="HTML部分"></a>HTML部分</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lunbo&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 轮播图图片 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/bg1.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/bg2.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/bg3.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 轮播图下方的小圆点 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pointlist&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;point active&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;point&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;point&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 左箭头图片 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/banner-left.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gopre&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 右箭头图片 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./img/banner-right.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;gonext&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="CSS部分-1"><a href="#CSS部分-1" class="headerlink" title="CSS部分"></a>CSS部分</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">/*清除默认margin padding样式的影响 */</span></span><br><span class="line"><span class="selector-id">#lunbo</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">460px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">55px</span> auto;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125; <span class="comment">/* 给盒子设置宽高并水平居中 */</span></span><br><span class="line"><span class="selector-class">.list</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">700px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">/* 设置ul无序列表为相对定位,使ul列表前面的小圆点消失*/</span></span><br><span class="line"><span class="selector-class">.item</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">8s</span>;</span><br><span class="line">&#125; <span class="comment">/* 设置每个li的位置，opacity让图片暂时隐藏 */</span></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">700px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">450px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/* z-index: 10; */</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/* 让li标签显示，即图片框的一张图片显示 </span></span><br><span class="line"><span class="comment">再通过js更改class类名即可实现自动轮播*/</span></span><br><span class="line"><span class="selector-class">.btn</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">15</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125; <span class="comment">/* 设置左右箭头的样式，并隐藏 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#gopre</span>&#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#gonext</span>&#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使小圆点定位到轮播图下方 */</span></span><br><span class="line"><span class="selector-class">.pointlist</span>&#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.point</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#8B888B</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">14px</span>;</span><br><span class="line"><span class="attribute">cursor</span>: pointer; <span class="comment">/* 鼠标经过或点击时 鼠标光标变为小手 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.point</span><span class="selector-class">.active</span>&#123;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125; <span class="comment">/* 设置小圆点点击后的样式，这里点击后背景颜色变为白色 */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="JS部分-1"><a href="#JS部分-1" class="headerlink" title="JS部分"></a>JS部分</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> items = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;item&#x27;</span>); <span class="comment">// 获取所有class为item的元素</span></span><br><span class="line"><span class="keyword">let</span> points = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;point&#x27;</span>); <span class="comment">// 获取所有class为point的元素</span></span><br><span class="line"><span class="keyword">let</span> goPreBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;gopre&#x27;</span>); <span class="comment">// 获取id为gopre的元素</span></span><br><span class="line"><span class="keyword">let</span> goNextBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;gonext&#x27;</span>); <span class="comment">// 获取id为gonext的元素</span></span><br><span class="line"><span class="keyword">let</span> lunbo_div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;lunbo&#x27;</span>); <span class="comment">// 获取id为lunbo的元素</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> time = <span class="number">0</span>; <span class="comment">// 定时器时间</span></span><br><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>; <span class="comment">// 轮播图图片和小圆点的下标</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clearActive</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        items[i].<span class="property">className</span> = <span class="string">&quot;item&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; points.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        points[i].<span class="property">className</span> = <span class="string">&quot;point&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goIndex</span>(<span class="params"></span>) &#123; <span class="comment">// 实现轮播的函数</span></span><br><span class="line">    <span class="title function_">clearActive</span>();</span><br><span class="line">    points[index].<span class="property">className</span> = <span class="string">&#x27;point active&#x27;</span>;</span><br><span class="line">    items[index].<span class="property">className</span> = <span class="string">&#x27;item active&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">next</span>(<span class="params"></span>) &#123; <span class="comment">//切换下一张图片</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        index++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        index = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">goIndex</span>();</span><br><span class="line">    <span class="comment">// 一共是3张图片，移动到第3张时再向右移动，这时就要移动第1张，所以需要做判断当前是第几张图片</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pre</span>(<span class="params"></span>) &#123; <span class="comment">// 切换上一张图片</span></span><br><span class="line">    <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">        index = <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        index--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">goIndex</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击时切换下一张</span></span><br><span class="line">goNextBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击时切换上一张</span></span><br><span class="line">goPreBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">pre</span>();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; points.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    points[i].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> pointIndex = <span class="variable language_">this</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-index&#x27;</span>); <span class="comment">// 获取当前元素data-index的属性值</span></span><br><span class="line">        index = pointIndex;</span><br><span class="line">        <span class="title function_">goIndex</span>();</span><br><span class="line">        time = <span class="number">0</span>; <span class="comment">//重新设置定时器时间</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    time++;</span><br><span class="line">    <span class="keyword">if</span> (time == <span class="number">20</span>) &#123;</span><br><span class="line">        <span class="title function_">next</span>();</span><br><span class="line">        time = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">100</span>); <span class="comment">// 设置定时器 2000为2500毫秒，即2秒后自动轮播</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 轮播左右箭头根据鼠标的移入、移出 来显示、隐藏图标</span></span><br><span class="line">lunbo_div.<span class="title function_">addEventListener</span>(<span class="string">&quot;mouseover&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">goPreBtn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span></span><br><span class="line">goNextBtn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">lunbo_div.<span class="title function_">addEventListener</span>(<span class="string">&quot;mouseout&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">goPreBtn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span></span><br><span class="line">goNextBtn.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h2><p><img src="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/lunbo2.jpg"><br><a href="https://ahaoblog.oss-cn-guangzhou.aliyuncs.com/img/lunbo2.mp4">点我查看完整效果</a></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>使用原生css、js实现轮播图，最主要的是理解轮播图的主体思想，即 图片1 ——&gt; 图片2 ——&gt; 图片3 ——&gt; 图片1 这个不断循环的过程，这样我们就很容易想到使用js的定时器来实现自动轮播。然后想办法让展示区每隔几秒展示不同图片，整个轮播图就完成了。<br>本文源码获取 ——&gt; <a href="https://wwp.lanzouq.com/iWhuj08mw3pg">点我获取源码</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 轮播图 </tag>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
